<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Joey Stanley">
<meta name="dcterms.date" content="2018-02-02">

<title>Joey Stanley - Recording Equipment for Sociolinguistic Interviews</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles_updated.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Joey Stanley</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html" rel="" target="">
 <span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html" rel="" target="">
 <span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html" rel="" target="">
 <span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resources.html" rel="" target="">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/index.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/joey_stan" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://bsky.app/profile/joeystan.bsky.social" rel="" target=""><i class="bi bi-clouds-fill" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JoeyStanley/joeystanley_new" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Recording Equipment for Sociolinguistic Interviews</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Methods</div>
                <div class="quarto-category">Phonetics</div>
                <div class="quarto-category">Research</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Joey Stanley </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 2, 2018</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">October 29, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#notes-from-my-logjournal" id="toc-notes-from-my-logjournal" class="nav-link active" data-scroll-target="#notes-from-my-logjournal">Notes from my log/journal</a>
  <ul class="collapse">
  <li><a href="#monday-may-30-2016" id="toc-monday-may-30-2016" class="nav-link" data-scroll-target="#monday-may-30-2016">Monday, May 30, 2016</a></li>
  <li><a href="#thursday-may-31-2016" id="toc-thursday-may-31-2016" class="nav-link" data-scroll-target="#thursday-may-31-2016">Thursday, May 31, 2016</a></li>
  <li><a href="#saturday-july-2-2016" id="toc-saturday-july-2-2016" class="nav-link" data-scroll-target="#saturday-july-2-2016">Saturday, July 2, 2016</a></li>
  </ul></li>
  <li><a href="#additional-thoughts-on-technical-stuff" id="toc-additional-thoughts-on-technical-stuff" class="nav-link" data-scroll-target="#additional-thoughts-on-technical-stuff">Additional thoughts on technical stuff</a></li>
  <li><a href="#tldr" id="toc-tldr" class="nav-link" data-scroll-target="#tldr">TL;DR</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>As the years pass on this blog post, I’m starting to notice that it is aging. Some links are breaking as certain products are taken off the market and people take YouTube videos down. Also, the prices of most products have gone up. I’ll keep this page up though because, even if the specific advice is no longer helpful, it might be useful to see my thought process.</p>
</div>
</div>
<p>Today a fellow grad student asked me if I had any recommendations for recording equipment for conducting fieldwork. I actually do have some suggestions. Since this is something I get asked fairly regularly, I thought I’d write a blog post about it.</p>
<p>For every project I do I keep a log/journal wherein I track my progress and write general thoughts about what’s happening. The following comes from a couple entries in mid 2016. At the time, I was about four weeks away from flying out to Washington State to conduct my first sociolinguistic interviews. I had received a small grant to fund the fieldwork, but I was hoping to borrow equipment from the school since the majority of the money would go towards flights and compensating participants. The rest is verbatim from my notes, with some minor edits for clarification.</p>
<p>By the way, a couple times I make reference to Natalie Schilling’s 2013 book <a href="https://www.amazon.com/Sociolinguistic-Fieldwork-Key-Topics-Sociolinguistics/dp/0521127971/ref=sr_1_1?ie=UTF8&amp;qid=1517636652&amp;sr=8-1&amp;keywords=sociolinguistic+fieldwork"><em>Sociolinguistic Fieldwork</em></a>. It’s fantastic. If you’re ever planning on doing fieldwork, I highly recommend this book!</p>
<section id="notes-from-my-logjournal" class="level2">
<h2 class="anchored" data-anchor-id="notes-from-my-logjournal">Notes from my log/journal</h2>
<section id="monday-may-30-2016" class="level3">
<h3 class="anchored" data-anchor-id="monday-may-30-2016">Monday, May 30, 2016</h3>
<p>I’ve thought a lot about my equipment situation. I went to places on campus this week and it looks like checking out a microphone and recorder is not going to happen. All the ones from the phonetics lab are checked out, and anywhere else that has them on campus will only let me keep it for a few days. I don’t mind the thought of buying my own equipment, especially this certainly won’t be my only set of interviews. But I didn’t budget for them and I was counting on using really good ones for free.</p>
<p>[Based on a recommendation from a UGA employee,] I wrote to a store called <a href="https://www.sweetwater.com">Sweetwater</a> which is well-known for having quality equipment. They specialize in recording equipment for musicians and sound booths, and have a lot of professional equipment. The guy wrote to me and recommended a $260 recorder and a $650 necklace microphone. Yeah, I don’t have that kind of budget.</p>
<p>I talked to [the UGA employee who recommended Sweetwater], who said I could probably hook up a lavaliere mic to my iPhone and it would turn out alright. I looked though, and it’s hard to find a decent lavaliere mic, especially one that would hook up to my phone. The <a href="https://www.sweetwater.com/store/compare.php?items=(smartLavPls,iRigMicLav,MVL)">three</a> that they have at Sweetwater don’t fit the required specifications I need (frequency range for two, and self-noise for another). I looked on Amazon, and there are so many mics out there, and I can’t filter by specifications, so I stopped looking.</p>
<p>I realized I do have a decent microphone already, my <a href="https://www.bluedesigns.com/products/yeti/">Blue Yeti</a>. In Schilling (2013), she says using a computer isn’t bad acoustically, it’s just a lot of equipment and may change the nature of the interview. I gave the laptop/Yeti setup a few test runs and the quality seems fine. However, I was reading later that the Yeti works best if it’s about a foot away from the speaker’s mouth. I don’t know how I can manage that since it’s so big. Even if I could get it that close without it tipping over on the couch or something, it’s a little hard to ignore, especially with the retro design.</p>
<p>As a side note, I realized that the entire corpus I collect won’t take up that much disk space. Schilling (2013) says each minute at the right quality will be about 10MB of space. Well, 60 minutes times 50 speakers at 10MB a minute is 30GB of space. I certainly don’t need an entire TB of hard drive space. I budgeted $140 for a specific one I liked because it was rugged. But a look on Amazon and I found <a href="http://www.amazon.com/Transcend-StoreJet-Military-External-TS1TSJ25M3/dp/B005MNGQ6C?ie=UTF8&amp;psc=1&amp;redirect=true&amp;ref_=oh_aui_detailpage_o00_s00">this one</a> for less than half the cost. It seems rugged enough for me. So if I get that one, that leaves about $80 extra for other equipment. So I feel somewhat justified in spending some money on equipment.</p>
<p>I’ve read that I can’t skimp on the sound quality. Get the best I can afford. Since this isn’t even my money (or rather, it’s free!), I can spend it how I want. And I would hate to do all this work to end up with poor sound quality. No, I need to get decent equipment, and if that means spending over $100 then that’s what it’ll take.</p>
<p>I went back to the Sweetwater worker’s recommendations. He said the huge $260 recorder was the way to go. I looked at the specs, and there are things I simply don’t need, like multiple tracks, and a good microphone, and a guitar tuner, and different settings for different instruments. Nope. Okay, so the one I need is certainly less than $260. Well, I saw that is was a <a href="https://zoomcorp.com/en/us/handheld-recorders/handheld-recorders/h5/">Zoom H5</a>. I wonder if there’s a Zoom H1. Sure enough, it’s the <a href="https://www.amazon.com/gp/bestsellers/musical-instruments/486500011/ref=sr_bs_3_486500011_1">top seller</a> on Amazon. Turns out this is the go-to device, and everyone uses it. The specs are still more than what I need (like 96 kHz—who needs that?), so maybe I can go cheaper. Anything cheaper though was bad. Like not being able to record in WAV or not having the right frequency response. So I decided to look at the #2 or #3 [top-selling] recorders. Turns out the <a href="https://tascam.com/us/category/portable_handheld_field_recoder">Tascam</a> ones are also great.</p>
<p>So I wanted to do some comparisons, and it turns out YouTube was a resource I should have been using this whole time. I found <a href="https://www.youtube.com/watch?v=sZRX6LbL2Po">this video</a> which compares the Zoom H1 to the <a href="https://www.amazon.com/Tascam-DR-22WL-Portable-Handheld-Recorder/dp/B00MIXFBKG">Tascam DR-22WL</a>. It’s really long, but I jumped to the parts that seemed most relevant, like self-noise and how it does with speech, and they’re basically the same. The reviewer says he actually prefers the Tascam because it feels sturdier. Well, it turns out there’s also the <a href="http://tascam.com/product/dr-05/">Tascam DR-05</a>, which has very similar specs. I googled a comparison between those two and found <a href="http://itemvsitem.com/tascam-dr-05-vs-dr-22wl-which-recorder-does-it-better/">this</a>, which basically concludes that the DR-05 is better. I don’t need the wifi/iPhone sync which can control the start and stop that the DR-22WL has. So, that saves me $10, and the DR-05 was <a href="http://www.amazon.com/TASCAM-DR-05-Portable-Digital-Recorder/dp/B004OU2IQG/ref=zg_bs_486500011_2">cheaper</a>, and the winner!</p>
<p>So, I noticed at the bottom of the YouTube video I saw, he listed the <a href="http://www.amazon.com/gp/product/B00EBK6C20/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00EBK6C20&amp;linkCode=as2&amp;tag=maxyuryevcom-20&amp;linkId=D46IV6LEUD4HSEW2">lavalier mic</a> he used, and it wasn’t bad. Now that I had found my new resource, I googled comparison videos of lavaliere mics and found <a href="https://www.youtube.com/watch?v=WPFwmizF3YA">this one</a>, which was exactly what I wanted. Basically, he said that this <a href="http://www.amazon.com/gp/product/B009YCI62Y/ref=as_li_ss_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B009YCI62Y&amp;linkCode=as2&amp;tag=gadg04-20">JK MIC-J 044</a> was the best, performing even better than an expensive one he had. Luckily it’s only $30!</p>
<p>So, I have a new equipment lineup. With other videos like <a href="https://www.youtube.com/watch?v=YI_3MwwQUDw">this</a> on how set one up, <a href="https://www.youtube.com/watch?v=44v8EGGW_HA">this</a> which showed me why those that work with recorders won’t work with iPhones, <a href="https://www.youtube.com/watch?v=bR4f8zTmmag">this</a> which showed how bad an iPhone set up is, and <a href="https://www.youtube.com/watch?v=bR4f8zTmmag">this</a> which showed me where to hook it on, I feel like a pro.</p>
</section>
<section id="thursday-may-31-2016" class="level3">
<h3 class="anchored" data-anchor-id="thursday-may-31-2016">Thursday, May 31, 2016</h3>
<p>I went ahead and bought the recorder, microphone, and hard drive. They’ll be here Thursday. I’m really excited.</p>
<blockquote class="twitter-tweet blockquote" data-lang="en">
<p lang="en" dir="ltr">
Boom. Just bought my recorder, microphone, and hard drive. Sociolinguistic interviews start in less than a month!
</p>
— Joey Stanley (<span class="citation" data-cites="joey_stan">@joey_stan</span>) <a href="https://twitter.com/joey_stan/status/737687047863930880?ref_src=twsrc%5Etfw">May 31, 2016</a>
</blockquote>
<script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</section>
<section id="saturday-july-2-2016" class="level3">
<h3 class="anchored" data-anchor-id="saturday-july-2-2016">Saturday, July 2, 2016</h3>
<p>[I had already done several interviews at this point.]</p>
<p>The recording equipment is turning out to be pretty good. The lavaliere mic and recorder are producing some great quality recordings, though I think the first couple were a little too quiet, in an attempt to reduce background noise. Some of the places I’ve recorded in have been remarkably quiet, like in a church and houses way out in the mountains. I recorded in stereo, but I realized the mic doesn’t pick up stereo so it’s just in the left channel. I’ll have to fix that in Praat. I had some problems clearing the memory card so—good thing I brought my backup—I used the Yeti mic in the church building. Those two interviews did seem quite a bit more formal, and it could have been the set up (sitting across from each other at a table with the big microphone between us), or maybe it was because the people were younger. The files turn out to be just about a gigabyte per interview, and that’s with the higher-than-normal settings of 48kHz and 24-bit something or other, instead of 44kHz and 16-bit.</p>
<p><br></p>
<hr>
</section>
</section>
<section id="additional-thoughts-on-technical-stuff" class="level2">
<h2 class="anchored" data-anchor-id="additional-thoughts-on-technical-stuff">Additional thoughts on technical stuff</h2>
<p>Okay, 2018 Joey here…</p>
<p>What I didn’t know before getting into all this is that there are two separate pieces of equipment: a microphone and a recorder. You need both to record sound and, crucially, you need both to have the technical specifications you want. If you plug in a $4 microphone into a $1000 recorder, you’re going to get a $4 sound. I considered for a while using my iPhone at least as a recorder and plugging in a good microphone to it, but I eventually rejected the idea. A lot of recorders come with their own microphone, but it’s recommended to not use it because of the self-noise. It’s also less conducive to sociolinguistic interviews.</p>
<p>As far as technical specifications, I wasn’t asking for anything crazy. First, I wanted a frequency range of at least 20Hz to 20,000Hz, which is about the range of normal human hearing. I also wanted at a least 16-bit rate, which has to do with the quality of sound (I’m still fuzzy on exactly what it means) and was a recommended spec. The recorder absolutely had to record in a WAV file, which is uncompressed and suitable for phonetic analysis, unlike mp3. I also wanted something that had low self-noise, but that was hard to find specs for.</p>
<p>You also need to pay attention to what kind of plug the equipment has. The small recorders I looked at used a plug the same size as what you would plug into your phone or computer. Big studio-quality microphones have an <a href="https://en.wikipedia.org/wiki/XLR_connector">XLR connector</a> which will only fit big, studio-quality recorders. As <a href="https://www.youtube.com/watch?v=44v8EGGW_HA">this</a> video explains (just the first 30 seconds), even though the microphone will physically fit into your phone, it’s not going to work: you need specially designed cables to work with phones—which unfortunately won’t work with your other recording equipment. And, given that iPhones now are ditching the headphone jack anyway, it’s a good thing I didn’t invest in a phone-only microphone.</p>
<p>You also need to be aware that USB microphones like the Blue Yeti not only have a USB as a connector (so they won’t fit into your recorder), but they also require power. Your computer’s battery is fine, but that means you have to bring your computer around and set up this whole studio. It’s possible to use “phantom power” which is, as far as I can tell, a little power source that goes between your microphone and your recorder, that provides the power. But this has to be plugged in, it’s kind of expensive, and looked like a bit of a nuisance. So I think getting a battery-powered, handheld recorder and a simple lavaliere mic is the way to go at least for conducting fieldwork.</p>
</section>
<section id="tldr" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="tldr">TL;DR</h2>
<div class="page-columns page-full"><p>I ended going with a <a href="http://www.amazon.com/TASCAM-DR-05-Portable-Digital-Recorder/dp/B004OU2IQG/ref=zg_bs_486500011_2">Tascam DR-05</a> for my recorder.  I couldn’t really tell any difference between it and the <a href="https://www.amazon.com/Zoom-ZH1-Portable-Digital-Recorder/dp/B003QKBVYK/ref=zg_bs_486500011_1?_encoding=UTF8&amp;psc=1&amp;refRID=HK4ZS0PHQH2S5G0P8ZNQ">Zoom H1</a> except that at the time the Tascam was about $10 cheaper. There’s a 2nd edition Tascam now, so I think the Zoom is cheaper now. It exceeds my needs for technical specs (I set it to 24-bit and 28,000Hz) and works great.</p><div class="no-row-height column-margin column-container"><span class="">Edit: At the time of writing, it was $90. The price has gone up since then.</span></div></div>
<p>For a microphone, I used a <a href="http://www.amazon.com/gp/product/B009YCI62Y/ref=as_li_ss_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B009YCI62Y&amp;linkCode=as2&amp;tag=gadg04-20">JK MIC-J 044</a> lavaliere mic. It was surprisingly only $30 and, according to YouTube videos, performed as well as the &gt;$100 ones. I wish it picked up less background noise, but otherwise I’ve been very impressed with it. It’s only 11 grams and people tend to forget pretty quickly that it’s there.</p>
<p>I did end up with the external hard drive I mentioned in the post, a <a href="https://www.transcend-info.com/Products/No-284">Transcend 25M3</a>, which cost me about $60. I liked it so much I got a second one a year later.</p>
<p>I would also recommend a 32GB micro-USB for the recorder. The one that came with mine was only 4GB and it got full after only 3–4 interviews. A 32GB lasts a day or two with no problem. <a href="https://www.amazon.com/gp/product/B073JWXGNT/ref=oh_aui_detailpage_o01_s00?ie=UTF8&amp;psc=1">Here’s</a> the one I got for a later project.</p>
<p>And don’t forget extra batteries!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>